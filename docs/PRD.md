# PRD  
## 파일명 표준화 및 이미지 변환 유틸리티 (Python GUI)

---

## 1. 개요 (Overview)

### 1.1 목적
카메라·편집 툴 등에서 생성된 다양한 사진/영상 파일명을  
표준 형식인 `IMG_<원본파일명>` 규칙으로 일괄 변환하고,  
HEIC/HIF 이미지를 JPG로 자동 변환하는 **로컬 GUI 기반 유틸리티**를 제공한다.

### 1.2 배경
- 카메라 RAW/JPG, 편집본( `_보정` ) 혼재
- 파일명 규칙 불일치로 인한 관리/정렬 문제
- 수작업 변경의 비효율 및 오류 가능성
- 대량 파일 처리 시 안정성과 진행 가시성 필요

---

## 2. 범위 (Scope)

### 포함 (In Scope)
- 로컬 파일/폴더 기반 처리
- GUI를 통한 입력 폴더 지정
- 재귀적 하위 폴더 처리
- 파일명 규칙 변환
- 진행 상태 실시간 표시
- 결과 리포트 생성
- 파일 단위 예외 처리

### 제외 (Out of Scope)
- 클라우드 연동
- EXIF 기반 날짜/메타데이터 리네이밍
- RAW 포맷(CR2/CR3/NEF 등) 처리
- 중복 파일 자동 병합/삭제
- 멀티스레드/병렬 처리 최적화 (초기 버전)

---

## 3. 사용자 시나리오 (User Flow)

1. 프로그램 실행
2. GUI에서:
   - 소스 폴더 선택
3. “실행” 버튼 클릭
4. 처리 진행 상황 실시간 확인
5. 완료 후:
   - 변환 결과 확인
   - 리포트 확인
   - 에러 로그 확인(존재 시)
   - 결과 폴더 확인

---

## 4. 기능 요구사항 (FR)

### FR-01. 입력 폴더 선택
- GUI 폴더 선택 다이얼로그 제공
- 다음 폴더 지정 가능:
  - 소스 폴더 (입력)
- 소스 폴더 내 **하위 폴더 포함 재귀 처리**
- 소스 폴더 내 `result` 폴더 생성하여 결과 파일 저장
- 결과 폴더에 원본 폴더 구조 유지 (기본값)

---

### FR-02. 파일명 변환 규칙

#### 입력 예시
- `0R2A0813.jpg`
- `0R2A0813_보정.png`

#### 출력 규칙
- `IMG_0813.jpg`
- `IMG_08131.png`

#### 상세 규칙
- 기존 파일명 앞에 `IMG_` 접두사 추가
- OR2A 뒤의 4자리 숫자를 'IMG_' 접두사 뒤에 추가
- '_보정' 문구는 숫자1로 변환 (동일 파일명 존재 시 +1)
- 확장자는 소문자 표준화 (권장)

---

### FR-03. 호환 확장자 처리

#### 사진
- 입력 허용:
  - CR3, JPG, PNG, GIF, HEIC, HIF
- 출력:
  - 포맷 변환 없음 (파일명만 변경)

#### 영상
- 입력 허용:
  - MP4, WMA
- 출력:
  - 포맷 변환 없음 (파일명만 변경)

---

### FR-04. 진행 상태 표시 (GUI)
- 전체 파일 수
- 처리 완료 파일 수
- 전체 진행률 (%)
- 경과 시간
- 예상 남은 시간 (ETA)
- 평균 처리 속도 (files/sec)

---

### FR-05. 로그 처리
- ERROR만 파일 기록
- 로그 파일: `error.log`

---

### FR-06. 결과 리포트 생성
- 총 파일 수
- 성공/실패 수
- 변환된 파일 수
- 처리 시간
- 평균 처리 속도

---

### FR-07. 결과 폴더 팝업
- 변환 결과, 리포트, 에러 로그 확인 후 결과 폴더 팝업

---

## 5. 비기능 요구사항 (NFR)

### NFR-01. 안정성
- 단일 파일 오류 시 전체 중단 ❌
- 파일 단위 예외 처리 ⭕

---

### NFR-02. 사용성
- 비개발자도 사용 가능한 GUI
- 진행 상태 명확 표시

---

### NFR-03. 성능
- 단일 스레드 기준 수천 파일 처리 가능

---

### NFR-04. 이식성
- Windows 우선
- Python 3.x
- PyInstaller EXE 패키징 고려

---

## 6. 기술 스택
- Python 3.x
- tkinter
- Pillow
- pillow-heif
- logging

---

## 7. 제약 및 가정
- 로컬 파일만 처리
- 파일명 충돌 시 ERROR 처리
- 멀티스레드 미적용 (v1)

---

## 8. 향후 확장
- Dry-run
- EXIF 기반 리네이밍
- 병렬 처리

---

## 9. 성공 기준
- 크래시 없음
- 규칙 정확 적용
